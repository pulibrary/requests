$(".flash_messages").html("<%= escape_javascript(render :partial=>'flash_messages') %>");
<% if @submission.errors.messages.empty? %>
  $('.error').each(function( index ) {
    $(this).hide();
  });
<% else %>
  $('.error').each(function( index ) {
    $(this).hide();
  });
  <% @submission.errors.messages.each do |key, value| %>
    $(".error-<%= key %>").text("<%= value.first.html_safe %>"); 
    $(".error-<%= key %>").show();
  <% end %>
<% end %>